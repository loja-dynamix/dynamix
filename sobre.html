<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sobre Nós - Dynamix</title>
  
  <meta name="description" content="Conheça a história da Dynamix e seu fundador.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link id="google-fonts-link" href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/8e98006f77.js" crossorigin="anonymous"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --accent-color: #f3a712;
      --accent2-color: #ff8600;
      --accent3-color: #155d9a;
      --accent4-color: #125186;
      --primary-color: #ffc30d;
      --dark-text-color: #000000;
      --gray-text-color: #6c757d;
      --light-text-color: #ffffff;
      --dark-border-color: #777777;
      --light-border-color: #e6e6e6;
      --button-rounded-radius: 8px;
      --dark-background-color: #1768ac;
      --light-background-color: #ffeda3;
      --medium-background-color: #ffc94e;
      --primary-button-text-color: #ffffff;
      --font-family-body: 'DM Sans', sans-serif;
      --font-family-heading: 'Manrope', sans-serif;
    }
    /* Classe utilitária para texto com gradiente */
    .text-gradient {
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      background-image: linear-gradient(to right, var(--primary-color), var(--accent2-color));
    }
    
    .modal-backdrop { background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); }
    .cart-sidebar { transform: translateX(100%); transition: transform 0.3s ease-in-out; }
    .cart-sidebar.open { transform: translateX(0); }
    .expandable-fields { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out; opacity: 0; }
    .expandable-fields.open { max-height: 500px; opacity: 1; }
    
    /* Controle de Views (SPA) */
    .view-section { display: none; }
    .view-section.active { display: block; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>
<body class="min-h-screen bg-gray-50 [font-family:var(--font-family-body)] flex flex-col relative overflow-x-hidden">
  
  <header id="global-header" class="code-section bg-white border-b border-gray-300 sticky top-0 z-50">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-28">
        <a href="/" class="flex items-center">
          <img src="https://i.imgur.com/a5JJDad.png" alt="Dynamix" class="h-28 py-2 object-contain">
        </a>
        
        <nav class="hidden lg:flex items-center space-x-8">
          <a href="/" class="text-[var(--dark-text-color)] hover:text-[var(--accent-color)] font-medium transition-colors duration-300">Início</a>
          <a href="/products" class="text-[var(--dark-text-color)] hover:text-[var(--accent-color)] font-medium transition-colors duration-300">Produtos</a>
          <a href="/combos" class="text-[var(--dark-text-color)] hover:text-[var(--accent-color)] font-medium transition-colors duration-300">Combos</a>
          <a href="#" onclick="switchView('about-view')" class="text-[var(--accent-color)] font-bold transition-colors duration-300">Sobre Nós</a>
          <a href="/contact" class="text-[var(--dark-text-color)] hover:text-[var(--accent-color)] font-medium transition-colors duration-300">Contato</a>
          
          <button onclick="toggleCart()" class="relative text-[var(--dark-text-color)] hover:text-[var(--accent-color)] transition-colors mr-2">
            <i class="fas fa-shopping-cart text-2xl"></i>
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full hidden">0</span>
          </button>

          <div class="pl-4 border-l border-gray-300 min-w-[160px] relative">
            <button id="login-trigger-btn" class="flex items-center gap-3 group text-left w-full">
              <i class="fas fa-user text-2xl text-black group-hover:text-[var(--accent-color)] transition-colors duration-300"></i>
              <div class="flex flex-col leading-none">
                <span class="text-[11px] text-gray-500 font-medium">Bem-vindo</span>
                <span class="text-sm font-bold text-black group-hover:text-[var(--accent-color)] transition-colors duration-300">
                  Entre ou <br>Cadastre-se
                </span>
              </div>
            </button>
            <div id="user-logged-menu" class="hidden flex items-center gap-3">
                <button onclick="switchView('profile-view')" class="flex flex-col leading-none text-left group">
                    <span class="text-[11px] text-gray-500 font-medium">Olá,</span>
                    <span id="user-name-display" class="text-sm font-bold text-[var(--accent2-color)] group-hover:underline truncate max-w-[120px]">Visitante</span>
                </button>
                <button id="logout-btn" class="text-xs text-red-500 hover:text-red-700 font-medium underline ml-2">Sair</button>
            </div>
            <div id="verify-warning" class="hidden absolute top-14 left-0 w-full bg-yellow-100 border border-yellow-400 text-yellow-800 px-2 py-1 rounded text-[10px] text-center shadow-md z-50">
                Verifique seu e-mail!
            </div>
          </div>
        </nav>

        <div class="flex items-center gap-4 lg:hidden">
            <button onclick="toggleCart()" class="relative text-[var(--dark-text-color)]">
                <i class="fas fa-shopping-cart text-2xl"></i>
                <span id="mobile-cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full hidden">0</span>
            </button>
            <button id="mobile-menu-btn" class="text-[var(--dark-text-color)] focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
      </div>
    </div>
  </header>

  <div id="about-view" class="view-section active">
      <section class="relative bg-gradient-to-br from-[var(--primary-color)] via-[var(--accent2-color)] to-[var(--accent4-color)] pt-24 pb-48 text-white overflow-hidden">
        
        <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full mix-blend-overlay filter blur-3xl opacity-20 animate-pulse"></div>

        <div class="container mx-auto px-4 text-center relative z-10">
          <span class="inline-block py-1 px-4 rounded-full bg-white text-[var(--accent2-color)] font-bold text-sm mb-6 shadow-lg">
            A HORA É AGORA
          </span>
          <h1 class="text-4xl md:text-6xl font-bold font-[var(--font-family-heading)] mb-6 leading-tight drop-shadow-md">
            Mais que Suplementos. <br>É Combustível para Sua Vida.
          </h1>
          <p class="text-xl text-white text-opacity-90 max-w-2xl mx-auto leading-relaxed font-medium">
            A Dynamix é o resultado da paixão de um fundador por entregar performance real, sem promessas vazias.
          </p>
        </div>
      </section>

      <section class="relative z-20 -mt-32 mb-20">
        <div class="container mx-auto px-4">
          <div class="bg-white rounded-[2.5rem] shadow-2xl p-6 md:p-10 flex flex-col lg:flex-row items-center gap-10 max-w-5xl mx-auto border border-gray-100 relative overflow-hidden">
            
            <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-[var(--light-background-color)] to-transparent opacity-50 rounded-bl-[2.5rem] pointer-events-none"></div>

            <div class="w-full lg:w-2/5 shrink-0 relative group">
                <div class="absolute -inset-1 bg-gradient-to-tr from-[var(--primary-color)] via-[var(--accent2-color)] to-[var(--accent3-color)] rounded-[2rem] blur-sm opacity-70 group-hover:opacity-100 transition-all duration-500"></div>
                <img src="https://images.unsplash.com/photo-1556157382-97eda2d62296?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="Fundador da Dynamix" class="relative rounded-[1.8rem] w-full h-[420px] object-cover shadow-lg bg-white p-1">
            </div>

            <div class="w-full lg:w-3/5 text-left relative z-10">
                <h3 class="text-3xl font-bold text-black font-[var(--font-family-heading)] mb-6">
                    A missão de um homem só: <span class="text-gradient">Qualidade sem atalhos.</span>
                </h3>
                <div class="space-y-5 text-gray-600 leading-relaxed text-lg">
                    <p>
                        <strong class="text-black">"Eu estava cansado de ser enganado."</strong>
                    </p>
                    <p>
                        Foi esse sentimento que me fez criar a Dynamix. Como atleta amador, eu gastava dinheiro em produtos com rótulos lindos, mas que por dentro eram pura enganação. Eu decidi que se quisesse algo bem feito, teria que fazer eu mesmo.
                    </p>
                    <p>
                        Aqui não tem investidor engravatado ou conselho administrativo focado apenas no lucro. <strong class="text-[var(--accent2-color)]">Sou apenas eu</strong>, selecionando pessoalmente cada ingrediente que entra nos nossos potes.
                    </p>
                    <p>
                        Quando você escolhe a Dynamix, você está confiando na minha palavra e no meu compromisso diário com a sua saúde.
                    </p>
                </div>
                
                <div class="mt-10 flex items-center gap-6 pt-6 border-t border-gray-100">
                    <div>
                        <p class="font-bold text-xl text-black font-[var(--font-family-heading)]">Roberto M.</p>
                        <p class="text-[var(--accent3-color)] font-medium">Fundador & Único Dono</p>
                    </div>
                    <img src="https://raw.githubusercontent.com/MateusZito2024/Cria-o-de-Sites/refs/heads/main/signature.png" alt="Assinatura" class="h-14 opacity-40 ml-auto filter grayscale hover:grayscale-0 transition-all">
                </div>
            </div>

          </div>
        </div>
      </section>

      <section class="py-20 bg-white">
        <div class="container mx-auto px-4">
          <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold font-[var(--font-family-heading)] text-black mb-4">
              O que move a Dynamix
            </h2>
            <p class="text-gray-500 max-w-2xl mx-auto">
              Três princípios inegociáveis que defini desde o primeiro dia.
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            
            <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-[var(--primary-color)] to-[var(--accent2-color)] p-1 shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all duration-300">
                <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-[1.7rem] p-8 h-full text-white relative overflow-hidden">
                    <div class="absolute right-0 top-0 opacity-20 transform translate-x-1/4 -translate-y-1/4">
                        <i class="fas fa-shield-alt text-9xl"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-sm">
                            <i class="fas fa-check text-[var(--accent2-color)] text-3xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold font-[var(--font-family-heading)] mb-3">Verdade no Rótulo</h3>
                        <p class="opacity-90 font-medium leading-relaxed">
                            Sem misturas proprietárias ("proprietary blends") para esconder doses baixas. Você sabe exatamente o que e quanto está tomando.
                        </p>
                    </div>
                </div>
            </div>

            <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-[var(--accent2-color)] to-red-500 p-1 shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 md:-mt-6">
                <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-[1.7rem] p-8 h-full text-white relative overflow-hidden">
                    <div class="absolute right-0 top-0 opacity-20 transform translate-x-1/4 -translate-y-1/4">
                        <i class="fas fa-fire text-9xl"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-sm">
                            <i class="fas fa-heartbeat text-red-500 text-3xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold font-[var(--font-family-heading)] mb-3">Feito para Quem Treina</h3>
                        <p class="opacity-90 font-medium leading-relaxed">
                            Eu testo tudo. Se não for bom o suficiente para o meu próprio treino, não é bom o suficiente para ser vendido na minha loja.
                        </p>
                    </div>
                </div>
            </div>

            <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-[var(--accent3-color)] to-[var(--dark-background-color)] p-1 shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all duration-300">
                <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-[1.7rem] p-8 h-full text-white relative overflow-hidden">
                    <div class="absolute right-0 top-0 opacity-20 transform translate-x-1/4 -translate-y-1/4">
                        <i class="fas fa-handshake text-9xl"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-sm">
                            <i class="fas fa-user-friends text-[var(--accent3-color)] text-3xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold font-[var(--font-family-heading)] mb-3">Atendimento Direto</h3>
                        <p class="opacity-90 font-medium leading-relaxed">
                            Sem call centers terceirizados. Aqui o atendimento é próximo, humano e focado em resolver o seu problema de verdade.
                        </p>
                    </div>
                </div>
            </div>

          </div>
        </div>
      </section>

      <section class="py-24 bg-gray-50 relative overflow-hidden">
        <div class="container mx-auto px-4 text-center relative z-10">
          <div class="bg-white rounded-3xl p-12 shadow-xl border-2 border-transparent bg-clip-padding" style="background-image: linear-gradient(white, white), linear-gradient(to right, var(--primary-color), var(--accent4-color)); background-origin: border-box;">
              <h2 class="text-3xl md:text-5xl font-bold text-black mb-6 font-[var(--font-family-heading)]">
                Venha treinar com a gente.
              </h2>
              <p class="text-gray-600 mb-10 max-w-xl mx-auto text-lg">
                Experimente a diferença de um suplemento feito com integridade e propósito.
              </p>
              <a href="/products" class="inline-flex items-center gap-3 bg-black text-white px-10 py-5 rounded-xl font-bold text-lg hover:bg-[var(--accent2-color)] hover:shadow-xl hover:scale-105 transition-all duration-300 group">
                <span>Ver Loja Completa</span>
                <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
              </a>
          </div>
        </div>
      </section>
  </div>

  <div id="profile-view" class="view-section min-h-[60vh] bg-gray-50 py-10">
      <div class="container mx-auto px-4 max-w-3xl">
          <button onclick="switchView('about-view')" class="mb-6 flex items-center gap-2 text-gray-600 hover:text-[var(--primary-color)]">
              <i class="fas fa-arrow-left"></i> Voltar
          </button>
          <div class="bg-white rounded-2xl shadow-xl p-8">
              <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-[var(--dark-text-color)] font-[var(--font-family-heading)]">Minha Conta</h2>
                <i class="fas fa-user-circle text-4xl text-[var(--accent-color)]"></i>
              </div>
              <p class="text-gray-500 mb-8 bg-yellow-50 p-3 rounded border border-yellow-200 text-sm">
                <i class="fas fa-info-circle mr-1"></i> Dados como CPF e E-mail não podem ser alterados por segurança.
              </p>
              
              <form id="profile-form" class="space-y-6">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div><label class="block text-xs font-bold text-gray-500 mb-1">Nome Completo (Fixo)</label><input type="text" id="profile-name" disabled class="w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 cursor-not-allowed"></div>
                      <div><label class="block text-xs font-bold text-gray-500 mb-1">CPF (Fixo)</label><input type="text" id="profile-cpf" disabled class="w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 cursor-not-allowed"></div>
                  </div>
                  <div><label class="block text-xs font-bold text-gray-500 mb-1">E-mail (Fixo)</label><input type="email" id="profile-email" disabled class="w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 cursor-not-allowed"></div>
                  
                  <hr class="border-gray-200">
                  <p class="font-bold text-lg">Dados de Entrega e Contato</p>
                  <div><label class="block text-xs font-bold text-gray-700 mb-1">Telefone / WhatsApp</label><input type="tel" id="profile-phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)]"></div>
                  <div class="grid grid-cols-3 gap-3">
                    <div><label class="block text-xs font-bold text-gray-700 mb-1">CEP</label><input type="text" id="profile-cep" onblur="buscarCep(this.value, 'profile')" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)]"></div>
                    <div class="col-span-2"><label class="block text-xs font-bold text-gray-700 mb-1">Rua / Logradouro</label><input type="text" id="profile-street" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] bg-gray-50"></div>
                  </div>
                  <div class="grid grid-cols-3 gap-3">
                    <div><label class="block text-xs font-bold text-gray-700 mb-1">Número</label><input type="text" id="profile-number" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)]"></div>
                    <div class="col-span-2"><label class="block text-xs font-bold text-gray-700 mb-1">Bairro</label><input type="text" id="profile-neighborhood" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] bg-gray-50"></div>
                  </div>
                  <div class="grid grid-cols-3 gap-3">
                    <div class="col-span-2"><label class="block text-xs font-bold text-gray-700 mb-1">Cidade</label><input type="text" id="profile-city" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] bg-gray-50"></div>
                    <div><label class="block text-xs font-bold text-gray-700 mb-1">Estado</label><input type="text" id="profile-state" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] bg-gray-50"></div>
                  </div>
                  <div><label class="block text-xs font-bold text-gray-700 mb-1">Complemento</label><input type="text" id="profile-complement" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)]"></div>
                  
                  <div class="flex items-center justify-between pt-4">
                      <p id="profile-status" class="text-sm font-bold"></p>
                      <button type="submit" class="bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] text-black px-8 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all">Salvar Alterações</button>
                  </div>

                  <div class="mt-10 pt-6 border-t border-red-100">
                      <p class="text-xs font-bold text-red-500 uppercase mb-2">Zona de Perigo</p>
                      <div class="bg-red-50 border border-red-200 rounded-lg p-4 flex flex-col sm:flex-row items-center justify-between gap-4">
                          <div class="text-sm text-red-800">
                              <strong>Excluir Conta:</strong> Essa ação é irreversível. Todos os seus dados serão apagados.
                          </div>
                          <button type="button" id="delete-account-btn" class="text-red-600 border border-red-300 bg-white hover:bg-red-600 hover:text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors">
                              Excluir Minha Conta
                          </button>
                      </div>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <footer id="global-footer" class="code-section bg-gradient-to-b from-[var(--dark-text-color)] to-[var(--accent4-color)] text-white mt-auto relative z-20">
    <div class="container mx-auto px-4 py-16">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
        <div>
          <a href="/" class="inline-block mb-6"><img src="https://i.imgur.com/a5JJDad.png" alt="Dynamix" class="h-20 object-contain brightness-0 invert"></a>
          <p class="text-gray-300 text-sm leading-relaxed mb-6">Sua loja de confiança para suplementos de qualidade premium.</p>
          <div class="flex gap-4">
            <a href="https://instagram.com/Dynamix.2025" target="_blank" class="w-10 h-10 rounded-full bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] flex items-center justify-center hover:scale-110 transition-transform duration-300"><i class="fab fa-instagram text-[var(--dark-text-color)] text-lg"></i></a>
            <a href="#" class="w-10 h-10 rounded-full bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] flex items-center justify-center hover:scale-110 transition-transform duration-300"><i class="fab fa-facebook-f text-[var(--dark-text-color)] text-lg"></i></a>
            <a href="#" class="w-10 h-10 rounded-full bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] flex items-center justify-center hover:scale-110 transition-transform duration-300"><i class="fab fa-whatsapp text-[var(--dark-text-color)] text-lg"></i></a>
          </div>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-6 font-[var(--font-family-heading)] text-[var(--primary-color)]">Links Rápidos</h3>
          <ul class="space-y-3">
            <li><a href="/" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-chevron-right text-xs"></i><span>Início</span></a></li>
            <li><a href="/products" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-chevron-right text-xs"></i><span>Produtos</span></a></li>
            <li><a href="/combos" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-chevron-right text-xs"></i><span>Combos</span></a></li>
            <li><a href="#" onclick="switchView('profile-view')" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-chevron-right text-xs"></i><span>Minha Conta</span></a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-6 font-[var(--font-family-heading)] text-[var(--primary-color)]">Categorias</h3>
          <ul class="space-y-3">
            <li><a href="/category/emagrecimento" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-fire text-xs"></i><span>Emagrecimento</span></a></li>
            <li><a href="/category/saude" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-heart text-xs"></i><span>Saúde</span></a></li>
            <li><a href="/category/treino" class="text-gray-300 hover:text-[var(--primary-color)] transition-colors flex gap-2"><i class="fas fa-dumbbell text-xs"></i><span>Treino</span></a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-6 font-[var(--font-family-heading)] text-[var(--primary-color)]">Contato</h3>
          <ul class="space-y-4 mb-6">
            <li class="flex items-start gap-3"><i class="fas fa-envelope text-[var(--primary-color)] mt-1"></i><span class="text-gray-300 text-sm">contato@dynamix.com.br</span></li>
            <li class="flex items-start gap-3"><i class="fas fa-phone text-[var(--primary-color)] mt-1"></i><span class="text-gray-300 text-sm">(11) 99999-9999</span></li>
          </ul>
          <p class="text-sm text-gray-300 mb-3">Receba ofertas exclusivas</p>
          <form class="flex gap-2"><input type="email" placeholder="Seu e-mail" class="flex-1 px-4 py-2 rounded-lg bg-white bg-opacity-10 border border-white border-opacity-20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-sm"><button type="button" class="bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] text-[var(--dark-text-color)] px-6 py-2 rounded-lg font-bold hover:shadow-lg transition-all"><i class="fas fa-paper-plane"></i></button></form>
        </div>
      </div>
      <div class="border-t border-white border-opacity-10 pt-8 mb-8">
        <h3 class="text-lg font-bold mb-6 text-center font-[var(--font-family-heading)] text-[var(--primary-color)]">Formas de Pagamento</h3>
        <div class="flex flex-wrap justify-center items-center gap-6">
          <div class="bg-white rounded-lg px-4 py-2 shadow-md"><i class="fab fa-cc-visa text-3xl text-blue-600"></i></div>
          <div class="bg-white rounded-lg px-4 py-2 shadow-md"><i class="fab fa-cc-mastercard text-3xl text-red-600"></i></div>
          <div class="bg-white rounded-lg px-4 py-2 shadow-md"><i class="fab fa-cc-amex text-3xl text-blue-500"></i></div>
          <div class="bg-white rounded-lg px-4 py-2 shadow-md"><i class="fab fa-pix text-3xl text-teal-500"></i></div>
        </div>
      </div>
      <div class="border-t border-white border-opacity-10 pt-8">
        <div class="flex flex-col md:flex-row justify-between items-center gap-6">
          <p class="text-gray-400 text-sm text-center md:text-left">© 2025 Dynamix. Todos os direitos reservados.</p>
          <div class="flex items-center gap-3"><span class="text-gray-400 text-sm">Desenvolvido por</span><a href="#" target="_blank" class="transform hover:scale-110 transition-transform"><img src="https://raw.githubusercontent.com/MateusZito2024/Cria-o-de-Sites/refs/heads/main/LOGO%20PNG.png" alt="Agência de Desenvolvimento" class="h-12 object-contain"></a></div>
        </div>
      </div>
    </div>
  </footer>

  <div id="auth-modal" class="fixed inset-0 z-[60] hidden items-center justify-center modal-backdrop">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-6 relative m-4 max-h-[90vh] overflow-y-auto animate-[fadeIn_0.3s_ease-out]">
        <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
        <div class="text-center mb-6">
            <h2 id="modal-title" class="text-2xl font-bold text-[var(--dark-text-color)] mb-1 font-[var(--font-family-heading)]">Bem-vindo</h2>
            <p id="modal-subtitle" class="text-sm text-gray-500">Acesse sua conta para continuar</p>
        </div>
        <form id="auth-form" class="space-y-3">
            <input type="email" id="email-input" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="E-mail">
            <input type="password" id="password-input" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="Senha">
            <div id="forgot-link-container" class="text-right">
                <button type="button" id="forgot-btn" class="text-xs text-gray-500 hover:text-[var(--accent2-color)] underline">Esqueceu a senha?</button>
            </div>
            <div id="register-fields" class="hidden space-y-3 border-t pt-3 mt-2">
                <p class="text-xs text-gray-500 font-bold uppercase mb-2">Dados Pessoais</p>
                <input type="text" id="reg-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="Nome Completo">
                <div class="grid grid-cols-2 gap-3">
                    <input type="text" id="reg-cpf" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="CPF (somente números)">
                    <input type="tel" id="reg-phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="Celular/WhatsApp">
                </div>
                <p class="text-xs text-gray-500 font-bold uppercase mb-2 mt-4">Endereço de Entrega</p>
                <div class="grid grid-cols-3 gap-3">
                    <input type="text" id="reg-cep" onblur="buscarCep(this.value, 'reg')" class="col-span-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="CEP">
                    <a href="https://buscacepinter.correios.com.br/app/endereco/index.php" target="_blank" class="col-span-2 text-xs flex items-center text-blue-500 underline">Não sei meu CEP</a>
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <input type="text" id="reg-street" class="col-span-2 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm bg-gray-50" placeholder="Rua/Av.">
                    <input type="text" id="reg-number" class="col-span-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="Número">
                </div>
                <input type="text" id="reg-neighborhood" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm bg-gray-50" placeholder="Bairro">
                <div class="grid grid-cols-3 gap-3">
                    <input type="text" id="reg-city" class="col-span-2 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm bg-gray-50" placeholder="Cidade">
                    <input type="text" id="reg-state" class="col-span-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm bg-gray-50" placeholder="UF">
                </div>
                <input type="text" id="reg-complement" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-sm" placeholder="Complemento (Opcional)">
            </div>
            <div id="error-message" class="text-red-500 text-sm text-center hidden font-bold bg-red-50 p-2 rounded"></div>
            <button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-[var(--primary-color)] to-[var(--accent2-color)] text-black font-bold py-3 rounded-lg hover:shadow-lg transition-transform mt-4">Entrar</button>
        </form>
        <form id="recover-form" class="hidden space-y-4">
            <p class="text-sm text-gray-600 text-center mb-4">Digite seu e-mail abaixo. Enviaremos um link para você redefinir sua senha.</p>
            <input type="email" id="recover-email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none" placeholder="Seu e-mail cadastrado">
            <div id="recover-message" class="text-sm text-center hidden font-bold p-2 rounded"></div>
            <button type="submit" id="send-recover-btn" class="w-full bg-gradient-to-r from-[var(--accent3-color)] to-[var(--accent4-color)] text-white font-bold py-3 rounded-lg hover:shadow-lg transition-transform">Enviar Link de Recuperação</button>
            <button type="button" id="back-to-login-btn" class="w-full text-gray-500 font-medium py-2 hover:underline">Voltar para o Login</button>
        </form>
        <div id="social-login-section">
            <div class="mt-4"><div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Ou</span></div></div><button id="google-btn" class="mt-4 w-full bg-white border border-gray-300 text-gray-700 font-medium py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2 text-sm"><i class="fab fa-google text-red-500"></i> Google</button></div>
            <p class="text-center mt-4 text-sm text-gray-600"><span id="toggle-text">Não tem conta?</span><button id="toggle-auth-mode" class="text-[var(--accent2-color)] font-bold hover:underline ml-1">Criar conta</button></p>
        </div>
    </div>
  </div>

  <div id="cart-overlay" onclick="toggleCart()" class="fixed inset-0 bg-black bg-opacity-50 z-[70] hidden transition-opacity"></div>
  <div id="cart-sidebar" class="fixed top-0 right-0 h-full w-full max-w-md bg-white z-[80] shadow-2xl cart-sidebar flex flex-col">
      <div class="p-4 border-b flex justify-between items-center bg-gray-50">
          <h2 class="text-xl font-bold flex items-center gap-2 font-[var(--font-family-heading)]"><i class="fas fa-shopping-cart text-[var(--accent-color)]"></i> Seu Carrinho</h2>
          <button onclick="toggleCart()" class="text-gray-500 hover:text-red-500"><i class="fas fa-times text-2xl"></i></button>
      </div>
      <div id="cart-items" class="flex-grow overflow-y-auto p-4 space-y-4"></div>
      <div class="p-6 border-t bg-gray-50">
          <div class="flex justify-between items-center mb-4"><span class="text-gray-600 font-bold">Total:</span><span id="cart-total" class="text-2xl font-bold text-[var(--accent2-color)]">R$ 0,00</span></div>
          <button onclick="checkout()" class="w-full bg-green-500 text-white py-4 rounded-lg font-bold hover:bg-green-600 transition shadow-lg flex items-center justify-center gap-2"><i class="fab fa-whatsapp text-xl"></i> Finalizar Compra</button>
      </div>
  </div>

  <div id="custom-dialog" class="fixed inset-0 z-[100] hidden items-center justify-center modal-backdrop transition-opacity duration-300">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 relative m-4 transform transition-all scale-100 border border-gray-100">
        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4" id="dialog-icon-bg">
            <i class="fas fa-exclamation-triangle text-red-600 text-xl" id="dialog-icon"></i>
        </div>
        <div class="text-center mb-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2" id="dialog-title">Título</h3>
            <p class="text-sm text-gray-500 leading-relaxed" id="dialog-message">Mensagem...</p>
        </div>
        <div id="dialog-input-container" class="hidden mb-6">
            <label class="block text-xs font-bold text-gray-500 mb-1 text-left">Confirme sua Senha:</label>
            <input type="password" id="dialog-input" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] outline-none text-gray-900" placeholder="Digite sua senha atual">
        </div>
        <div class="flex gap-3 justify-center">
            <button id="dialog-btn-cancel" class="flex-1 bg-white border border-gray-300 text-gray-700 px-4 py-3 rounded-lg font-bold hover:bg-gray-50 transition-colors">Cancelar</button>
            <button id="dialog-btn-confirm" class="flex-1 bg-red-600 text-white px-4 py-3 rounded-lg font-bold hover:bg-red-700 transition-colors shadow-lg">Confirmar</button>
        </div>
    </div>
  </div>

  <script>
    // Controle Visual de Views
    function switchView(viewId) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
        window.scrollTo(0,0);
    }

    // Toggle Carrinho
    function toggleCart() {
        const sidebar = document.getElementById('cart-sidebar');
        const overlay = document.getElementById('cart-overlay');
        if (sidebar.classList.contains('open')) {
            sidebar.classList.remove('open'); overlay.classList.add('hidden');
        } else {
            sidebar.classList.add('open'); overlay.classList.remove('hidden');
        }
    }

    // Mobile Menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, updateProfile, signInWithPopup, GoogleAuthProvider, sendPasswordResetEmail, deleteUser, EmailAuthProvider, reauthenticateWithCredential, reauthenticateWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc, updateDoc, deleteDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCcxUtccSBADIElGz6FHrIMAEFyI99njvU",
      authDomain: "dynamix-3cb48.firebaseapp.com",
      projectId: "dynamix-3cb48",
      storageBucket: "dynamix-3cb48.firebasestorage.app",
      messagingSenderId: "752736250186",
      appId: "1:752736250186:web:3787663031d273e9bd79b3",
      measurementId: "G-J06LSQSYYB"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    let currentUserData = null;
    let cart = [];

    // --- Sincronização em Tempo Real ---
    if (auth.currentUser) {
        syncUserData(auth.currentUser.uid);
    }

    function syncUserData(uid) {
        onSnapshot(doc(db, "users", uid), (docSnap) => {
            if (docSnap.exists()) {
                const data = docSnap.data();
                // Sincroniza Carrinho
                if (data.cart && JSON.stringify(data.cart) !== JSON.stringify(cart)) {
                    cart = data.cart;
                    updateCartUI();
                }
                // Sincroniza Dados de Perfil
                if (currentUserData) {
                    Object.assign(currentUserData, {
                        phone: data.phone, cep: data.cep, street: data.street, number: data.number,
                        neighborhood: data.neighborhood, city: data.city, state: data.state, complement: data.complement
                    });
                }
            }
        });
    }

    // --- Buscar CEP ---
    window.buscarCep = async (valor, prefixo) => {
        const cep = valor.replace(/\D/g, '');
        if (cep.length !== 8) return;
        document.getElementById(`${prefixo}-street`).value = "Buscando...";
        try {
            const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
            const data = await response.json();
            if (!data.erro) {
                document.getElementById(`${prefixo}-street`).value = data.logradouro;
                document.getElementById(`${prefixo}-neighborhood`).value = data.bairro;
                document.getElementById(`${prefixo}-city`).value = data.localidade;
                document.getElementById(`${prefixo}-state`).value = data.uf;
                document.getElementById(`${prefixo}-number`).focus();
            } else {
                alert("CEP não encontrado.");
                document.getElementById(`${prefixo}-street`).value = "";
            }
        } catch (e) {
            document.getElementById(`${prefixo}-street`).value = "";
        }
    };

    // --- UI References ---
    const modal = document.getElementById('auth-modal');
    const authForm = document.getElementById('auth-form');
    const loginBtn = document.getElementById('login-trigger-btn');
    const closeBtn = document.getElementById('close-modal');
    const toggleBtn = document.getElementById('toggle-auth-mode');
    const submitBtn = document.getElementById('submit-btn');
    const errorMsg = document.getElementById('error-message');
    const recoverForm = document.getElementById('recover-form');
    const forgotBtn = document.getElementById('forgot-btn');
    const backToLoginBtn = document.getElementById('back-to-login-btn');
    const socialSection = document.getElementById('social-login-section');
    const modalTitle = document.getElementById('modal-title');
    const modalSubtitle = document.getElementById('modal-subtitle');
    const forgotLinkContainer = document.getElementById('forgot-link-container');

    let isLogin = true;
    let isGoogleCompletion = false;

    const openModal = () => { if(!auth.currentUser) modal.classList.replace('hidden','flex'); };
    if(loginBtn) loginBtn.onclick = openModal;
    closeBtn.onclick = () => { modal.classList.replace('flex','hidden'); errorMsg.classList.add('hidden'); };

    // Toggle Login/Register
    toggleBtn.onclick = (e) => {
        e.preventDefault(); isLogin = !isLogin;
        document.getElementById('modal-title').innerText = isLogin ? "Bem-vindo" : "Criar Conta";
        submitBtn.innerText = isLogin ? "Entrar" : "Cadastrar";
        document.getElementById('toggle-text').innerText = isLogin ? "Não tem conta?" : "Já tem conta?";
        toggleBtn.innerText = isLogin ? "Criar conta" : "Fazer Login";
        
        const regDiv = document.getElementById('register-fields');
        const forgotDiv = document.getElementById('forgot-link-container');
        if(isLogin) {
            regDiv.classList.add('hidden');
            if(forgotDiv) forgotDiv.classList.remove('hidden');
            document.querySelectorAll('#register-fields input').forEach(i => i.required = false);
        } else {
            regDiv.classList.remove('hidden');
            if(forgotDiv) forgotDiv.classList.add('hidden');
            document.getElementById('reg-name').required = true;
            document.getElementById('reg-cpf').required = true;
            document.getElementById('reg-phone').required = true;
            document.getElementById('reg-cep').required = true;
        }
    };

    // Toggle Recover
    if(forgotBtn) forgotBtn.onclick = () => {
        authForm.classList.add('hidden'); socialSection.classList.add('hidden');
        recoverForm.classList.remove('hidden'); modalTitle.innerText = "Recuperar Senha";
    };
    if(backToLoginBtn) backToLoginBtn.onclick = () => {
        recoverForm.classList.add('hidden'); authForm.classList.remove('hidden');
        socialSection.classList.remove('hidden'); modalTitle.innerText = "Bem-vindo";
    };

    // Submit Auth
    authForm.onsubmit = async (e) => {
        e.preventDefault();
        const email = document.getElementById('email-input').value;
        const passInput = document.getElementById('password-input');
        const password = passInput.disabled ? "" : passInput.value;
        submitBtn.disabled = true; submitBtn.innerText = "Processando..."; errorMsg.classList.add('hidden');
        
        try {
            if(isLogin && !isGoogleCompletion) {
                await signInWithEmailAndPassword(auth, email, password);
                modal.classList.replace('flex','hidden');
            } else {
                const name = document.getElementById('reg-name').value;
                const cpf = document.getElementById('reg-cpf').value;
                const phone = document.getElementById('reg-phone').value;
                const addressData = {
                    cep: document.getElementById('reg-cep').value,
                    street: document.getElementById('reg-street').value,
                    number: document.getElementById('reg-number').value,
                    neighborhood: document.getElementById('reg-neighborhood').value,
                    city: document.getElementById('reg-city').value,
                    state: document.getElementById('reg-state').value,
                    complement: document.getElementById('reg-complement').value
                };
                let user;
                if (isGoogleCompletion) {
                    user = auth.currentUser;
                    if (!user) throw new Error("Usuário não detectado.");
                    await updateProfile(user, { displayName: name });
                } else {
                    const cred = await createUserWithEmailAndPassword(auth, email, password);
                    user = cred.user;
                    await updateProfile(user, { displayName: name });
                }
                await setDoc(doc(db, "users", user.uid), {
                    fullName: name, email: user.email, cpf: cpf, phone: phone, ...addressData, cart: []
                }, { merge: true });
                modal.classList.replace('flex','hidden');
                if(isGoogleCompletion) window.location.reload();
            }
        } catch(err) {
            let msg = "Erro: " + err.code;
            if(err.code === 'auth/email-already-in-use') msg = "E-mail já cadastrado.";
            if(err.code === 'auth/weak-password') msg = "Senha muito fraca.";
            errorMsg.innerText = msg; errorMsg.classList.remove('hidden');
        } finally {
            submitBtn.disabled = false;
            if(!isGoogleCompletion) submitBtn.innerText = isLogin ? "Entrar" : "Cadastrar";
        }
    };

    // Google Auth
    document.getElementById('google-btn').onclick = async () => {
        try {
            const result = await signInWithPopup(auth, provider);
            const user = result.user;
            const docSnap = await getDoc(doc(db, "users", user.uid));
            if (!docSnap.exists() || !docSnap.data().cpf) {
                isGoogleCompletion = true; isLogin = false;
                closeBtn.style.display = 'none';
                modalTitle.innerText = "Falta pouco!";
                document.getElementById('email-input').value = user.email;
                document.getElementById('email-input').disabled = true;
                document.getElementById('reg-name').value = user.displayName || "";
                document.getElementById('password-input').style.display = 'none';
                document.getElementById('password-input').disabled = true;
                document.getElementById('google-btn').parentElement.style.display = 'none';
                if(forgotLinkContainer) forgotLinkContainer.classList.add('hidden');
                document.getElementById('register-fields').classList.remove('hidden');
                submitBtn.innerText = "Salvar e Continuar";
            } else {
                modal.classList.replace('flex','hidden');
                window.location.reload();
            }
        } catch (err) { console.error(err); }
    };

    // --- Monitoramento de Estado ---
    onAuthStateChanged(auth, async (user) => {
        const userMenu = document.getElementById('user-logged-menu');
        const loginTrigger = document.getElementById('login-trigger-btn');
        const nameDisplay = document.getElementById('user-name-display');
        const verifyWarning = document.getElementById('verify-warning');
        
        if (user) {
            syncUserData(user.uid); // Começa a ouvir mudanças
            const docSnap = await getDoc(doc(db, "users", user.uid));
            
            // Cadastro Incompleto?
            if (!docSnap.exists() || !docSnap.data().cpf) {
                modal.classList.replace('hidden','flex');
                closeBtn.style.display = 'none';
                isGoogleCompletion = true; isLogin = false;
                document.getElementById('email-input').value = user.email;
                document.getElementById('register-fields').classList.remove('hidden');
                submitBtn.innerText = "Salvar Dados Obrigatórios";
                return;
            }

            closeBtn.style.display = 'block';
            loginTrigger.classList.add('hidden');
            userMenu.classList.replace('hidden', 'flex');
            
            currentUserData = docSnap.data();
            nameDisplay.innerText = currentUserData.fullName.split(' ')[0];
            cart = currentUserData.cart || [];
            
            // Popula form de perfil
            document.getElementById('profile-email').value = user.email;
            document.getElementById('profile-name').value = currentUserData.fullName || "";
            document.getElementById('profile-cpf').value = currentUserData.cpf || "";
            document.getElementById('profile-phone').value = currentUserData.phone || "";
            document.getElementById('profile-cep').value = currentUserData.cep || "";
            document.getElementById('profile-street').value = currentUserData.street || "";
            document.getElementById('profile-number').value = currentUserData.number || "";
            document.getElementById('profile-neighborhood').value = currentUserData.neighborhood || "";
            document.getElementById('profile-city').value = currentUserData.city || "";
            document.getElementById('profile-state').value = currentUserData.state || "";
            document.getElementById('profile-complement').value = currentUserData.complement || "";
            
            updateCartUI();
            if (verifyWarning) verifyWarning.classList.toggle('hidden', user.emailVerified);
        } else {
            currentUserData = null;
            cart = [];
            updateCartUI();
            loginTrigger.classList.remove('hidden');
            userMenu.classList.replace('flex', 'hidden');
            // Se estiver vendo perfil e deslogar, volta para sobre nós
            if(document.getElementById('profile-view').classList.contains('active')) switchView('about-view');
            if (verifyWarning) verifyWarning.classList.add('hidden');
            closeBtn.style.display = 'block';
        }
    });

    document.getElementById('logout-btn').onclick = () => signOut(auth);

    // Salvar Perfil
    document.getElementById('profile-form').onsubmit = async (e) => {
        e.preventDefault();
        const statusMsg = document.getElementById('profile-status');
        if (!auth.currentUser) return;
        statusMsg.innerText = "Salvando...";
        try {
            const newData = {
                phone: document.getElementById('profile-phone').value.trim(),
                cep: document.getElementById('profile-cep').value.trim(),
                street: document.getElementById('profile-street').value.trim(),
                number: document.getElementById('profile-number').value.trim(),
                neighborhood: document.getElementById('profile-neighborhood').value.trim(),
                city: document.getElementById('profile-city').value.trim(),
                state: document.getElementById('profile-state').value.trim(),
                complement: document.getElementById('profile-complement').value.trim()
            };
            await updateDoc(doc(db, "users", auth.currentUser.uid), newData);
            statusMsg.innerText = "Atualizado!";
            setTimeout(() => { statusMsg.innerText = ""; }, 3000);
        } catch (error) { statusMsg.innerText = "Erro ao salvar."; }
    };

    // Dialog Function
    window.showDialog = (type, title, msg) => {
        return new Promise((resolve) => {
            const dialog = document.getElementById('custom-dialog');
            document.getElementById('dialog-title').innerText = title;
            document.getElementById('dialog-message').innerHTML = msg.replace(/\n/g, '<br>');
            const btnConfirm = document.getElementById('dialog-btn-confirm');
            const btnCancel = document.getElementById('dialog-btn-cancel');
            const inputContainer = document.getElementById('dialog-input-container');
            const inputEl = document.getElementById('dialog-input');
            
            inputEl.value = "";
            if (type === 'alert') {
                inputContainer.classList.add('hidden'); btnCancel.classList.add('hidden'); btnConfirm.innerText = "OK";
            } else if (type === 'confirm' || type === 'password') {
                btnCancel.classList.remove('hidden'); btnConfirm.innerText = "Sim, Excluir";
                if (type === 'password') { inputContainer.classList.remove('hidden'); inputEl.focus(); } 
                else { inputContainer.classList.add('hidden'); }
            }
            dialog.classList.replace('hidden', 'flex');
            
            const newConfirm = btnConfirm.cloneNode(true);
            const newCancel = btnCancel.cloneNode(true);
            btnConfirm.parentNode.replaceChild(newConfirm, btnConfirm);
            btnCancel.parentNode.replaceChild(newCancel, btnCancel);
            
            newConfirm.addEventListener('click', () => {
                dialog.classList.replace('flex', 'hidden');
                if (type === 'password') resolve(inputEl.value); else resolve(true);
            });
            newCancel.addEventListener('click', () => { dialog.classList.replace('flex', 'hidden'); resolve(false); });
        });
    };

    // Delete Account
    const deleteBtn = document.getElementById('delete-account-btn');
    if(deleteBtn) deleteBtn.onclick = async () => {
        const user = auth.currentUser; if(!user) return;
        if(await window.showDialog('confirm', 'Excluir Conta?', 'Tem certeza?')) {
            try {
                if (user.providerData[0].providerId === 'google.com') {
                    await window.showDialog('alert', 'Confirmação', 'Faça login com Google novamente.');
                    await reauthenticateWithPopup(user, new GoogleAuthProvider());
                } else {
                    const pass = await window.showDialog('password', 'Senha', 'Digite sua senha:');
                    if(!pass) return;
                    await reauthenticateWithCredential(user, EmailAuthProvider.credential(user.email, pass));
                }
                await deleteDoc(doc(db, "users", user.uid));
                await deleteUser(user);
                window.location.reload();
            } catch(e) { window.showDialog('alert', 'Erro', e.message); }
        }
    };

    // Carrinho UI
    function updateCartUI() {
        const container = document.getElementById('cart-items');
        const totalEl = document.getElementById('cart-total');
        const countEls = [document.getElementById('cart-count'), document.getElementById('mobile-cart-count')];
        countEls.forEach(el => { if(el) { el.innerText = cart.length; el.classList.toggle('hidden', cart.length === 0); } });
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        totalEl.innerText = total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        if (cart.length === 0) { container.innerHTML = `<div class="text-center text-gray-500 mt-10"><p>Carrinho vazio.</p></div>`; return; }
        container.innerHTML = cart.map((item, index) => `
            <div class="flex items-center gap-4 bg-white p-3 rounded-lg shadow-sm border border-gray-100">
                <img src="${item.image}" class="w-16 h-16 object-cover rounded-md">
                <div class="flex-grow"><h4 class="font-bold text-sm text-gray-800">${item.name}</h4><p class="text-sm font-bold text-[var(--accent2-color)]">R$ ${item.price.toFixed(2).replace('.',',')}</p></div>
                <button onclick="window.removeFromCart(${index})" class="text-red-400 hover:text-red-600"><i class="fas fa-trash"></i></button>
            </div>`).join('');
    }

    // Funções Globais para o HTML chamar
    window.safeAddToCart = async (name, price, image) => {
        if(!auth.currentUser) { openModal(); return; }
        cart.push({name, price, image}); updateCartUI(); toggleCart();
        try { await updateDoc(doc(db, "users", auth.currentUser.uid), { cart: cart }); } 
        catch(e) { cart.pop(); updateCartUI(); }
    };
    window.removeFromCart = async (index) => {
        if(!auth.currentUser) return;
        cart.splice(index, 1); updateCartUI();
        try { await updateDoc(doc(db, "users", auth.currentUser.uid), { cart: cart }); } catch(e) {}
    };
    window.checkout = () => {
        if (!auth.currentUser) { openModal(); return; }
        if (cart.length === 0) { alert("Carrinho vazio!"); return; }
        let msg = `*NOVO PEDIDO*\nCliente: ${currentUserData.fullName}\nItens:\n`;
        cart.forEach(i => msg += `- ${i.name}\n`);
        window.open(`https://wa.me/5511916658264?text=${encodeURIComponent(msg)}`, '_blank');
    };
  </script>
</body>
</html>
